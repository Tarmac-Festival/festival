/*!
 * Tarmac Festival - Festival Allstedt v1.2.0 (https://tarmac-festival.de/)
 * Copyright 2019-2021 Martin Suckau
 */

$(function(){var r=$("#contactForm input#subject"),c=$("#contactForm input#name"),o=$("#contactForm input#email"),l=$("#contactForm textarea#message"),i=$("#contactForm button#send"),d=$("#contactForm #sendSpinner"),f=$("#alertSuccess"),u=$("#alertFail");$("#contactForm").on("submit",function(t){if(t.preventDefault(),d.removeClass("d-none"),i.attr("disabled",!0),f.first().slideUp("fast"),u.first().slideUp("fast"),!l.val())return alert("Bitte f√ºllen Sie alle Felder aus."),d.addClass("d-none"),void i.attr("disabled",!1);var e=r.val(),a=c.val(),n=o.val(),s="Nachricht von: "+a+" ["+n+"]<br>Betreff: "+e+"<br><br>Nachricht:<br>"+l.val();grecaptcha.execute("6LcuY9QUAAAAACswQfBwCN5I8Q0x6fmFXEKGhV5d",{action:"validate_captcha"}).then(function(t){console.log("recaptcha token: "+t);t=$.ajax({type:"POST",url:"/checkRecaptcha",data:{token:t,subject:"Anfrage Website: "+e,userMail:n,userName:a,email:"contact@tarmac-festival.de",message:s}});t.done(function(t,e){console.log("response: "+t,e),d.addClass("d-none"),i.attr("disabled",!1),"success"===t.result?(f.first().slideDown("fast").delay(5e3).slideUp("fast"),$("#contactForm").get(0).reset(),l.summernote("reset")):u.first().slideDown("fast")}),t.fail(function(t,e,a){console.error("Error while sending mail: "+e,a),u.first().slideDown("fast"),d.addClass("d-none"),i.attr("disabled",!1)})});return!1}),$('a[data-toggle="tab"]').click(function(t){t.preventDefault(),$(this).tab("show")})});